# 🌱Spring Boot의 코어 개념

# Spring이란?

- 엔터프라이즈용 Java 애플리케이션 개발을 편하게 할 수 있게 해주는 오픈소스 경량급 애플리케이션 프레임워크
---
## 프레임워크
- 어떤한 목적을 쉽게 달성할 수 있도록 해당 목적과 관련된 코드의 뼈대를 미리 만들어둔 것을 의미합니다.
- 즉 자주 사용하는 기능에 대한 골조를 만들어놓고, 개발자는 그 안에 구현할 수 있게 되는것
---
## 프레임워크 vs 라이브러리
- **라이브러리(Library)**
    - 내가 필요할 때 꺼내 쓰는 **도구 상자**
    - 내가 코드를 호출하면 기능이 실행됨 → **제어권은 개발자에게 있음**
    - 예: `XML 파싱 라이브러리` → 내가 `parse()` 호출해야 작동

- **프레임워크(Framework)**
    - 내가 코드를 프레임워크 안에 넣고, **실행 흐름은 프레임워크가 주도**
    - 즉, **개발자가 제어권을 갖는 것이 아니라, 프레임워크가 코드를 호출**
    - 예: Spring → URL 요청이 들어오면 내가 정의한 함수가 자동으로 실행됨
---

# DI, IOC, 서블릿

---
## IoC

- IoC는 Inversion of Control을 줄인 표현입니다.(제어의 역전)
- 제어의 역전은 다른 객체를 직접 생성하거나 제어하는 것이 아니라 외부에서 관리하는 객체를 가져와 사용하는 것입니다.
- 다른 객체를 직접 생성하거나 제어하는 것이 아니라 외부에서 관리하는 객체를 가져와 사용하는 것
- 여기서 외부(즉 객체를 관리하고 관리하는 주체)를 **스프링 컨테이너**라고 합니다

---

## DI
- DI는 Dependency(의존성) Injection(주입)의 줄인 표현입니다.(종속성 주입)
- 즉 객체가 필요로 하는 것(종속성)을 직접 만들지 않고 외부에서 주입받는 방식
- 토비의 스프링에서는 세가지 조건을 충족하는 작업을 주입이라 말합니다.
  1. 클래스 모델이나 코드에는 런타입 시점의 의존관계가 드러나지 않는다. 그러기 위해서는 인터페이스만 의존하고 있는다.
  2. 런타임 시점의 의존관계는 컨테이너나 팩토리 같은 제 3의 존재가 결정한다
  3. 의존관계는 사용할 오브젝트에 대한 래퍼런스를 외부에서 제공(주입) 해줌으로써 만들어진다.
- 객체를 외부 에서 주입 받아 약한 결합을 시켜 의존성 주입을 자동화 하여 개발자의 줄입니다
---

## 서블릿
- 웹페이지를 동적으로 생성하는 서버 측 프로그램 혹은 사양
- 웹 애플리케이션을 만들 때 HTTP 요청을 처리하는 역할을 하는 녀석
- ***서블릿 컨테이너***
  - 서블릿 객체를 생성, 초기화, 호출, 종료하는 생명주기를 관리
  - 서블릿을 직접 핸들링하는 것으로 요청과 응답을 할 수 있게 웹 서버와 쏘켓으로 통신합니다.

---

---

# 스프링에서의 DI,IoC,서블릿

---
## 빈(bean)
- 컨테이너가 관리하는 자바의 객체
- 스프링에서는 빈을 통해 객체를 인스턴스화한 후 객체 간의 의존 관계를 관리한다.
- [1] @Component 어노테이션 사용
  - 클래스에 어노테이션을 추가하고, Autowired로 다른 클래스에서 해당 Bean을 끌어온다.(묵시적 빈 정의)
  - 해당 어노테이션에는 @Controller, @Service, @Repository 에 내부적으로 들어있다.
- [2] @Configuration 어노테이션 사용
  - 이 방식은 스프링 라이브러리에 없는 외부 라이브러리도 Bean 생명주기를 사용할 수 있다는 점

---
## Spring IoC 컨테이너
- 객체의 생성과 관리를 개발자가 아닌 Spring 프레임워크가 담당하는 개념입니다.
- IoC 컨테이너는 POJO 기반의 개발을 가능하게 해준다.
- POJO는 복잡한 라이브러리나 프레임워크에 의존하지 않고, 순수한 자바 객체를 의미한다.

```java

private UserRepository userRepository;

수정자 주입 방법
public void setUserRepository(UserRepository userRepository){
    this.userRepository = userRepository;
}

생성자 주입 방법
public UserService(UserRepository userRepository) {
    this.userRepository = userRepository;
}
```
---
## Spring DI
- DI 원칙을 사용하면 코드가 더 깔끔해지고 객체에 종속성이 제공되면 분리되어 효과적이다.
- Spring의 의존성 주입 방식
  - 생성자 주입
    1. ***객체의 불변성을 보장해줍니다.***
       - Lombok 어노테이션의 @RequiredArgsConstructor로 대체할 수 있습니다.
       - @Autowired를 사용하여 생성자 주입
    
    2. ***Setter 주입***
       -  런타입에 의존성을 주입하기 떄문에, 의존성이 없더라도 객체가 생성 될 수 있다.
       - 주입 받으려는 빈의 생성자를 호출하여 빈을 찾거나, 빈 팩토리에 등록 
       - 생성된 객체 필드에 `@Autowired` 어노테이션을 검색 
       - 주입받으려는 객체를 세터 메서드를 통해 주입
       -  Lombok의 @Setter 어노테이션으로 대체 가능
       
    3. ***필드 주입***
       - 런타임에 의존성을 주입하기 때문에, 의존성이 없더라도 객체가 생성될 수 있다.
       - 주입받으려는 빈의 생성자를 호출하여 빈을 찾거나 빈 팩토리에 등록 
       - 생성된 객체 필드에 `@Autowired` 어노테이션을 검색 
       - 주입받으려는 객체를 필드에 주입
       - 의존성 관계가 드러나지 않으니까, Spring 컨테이너를 헷갈리게 해서 Bean들 간의 순환 참조 문제가 발생할 수 있다
---
## Spring의 DispatcherServlet
- **Front Controller 패턴**을 구현한 서블릿으로, 모든 HTTP 요청을 받는 녀석이에요. 이후, 요청을 적절한 Controller로 전달하고, 로직을 실행한 후 응답을 생성해줍니다.
- 요청이 dispatcherServlet으로 전달되기 전에 filter를 먼저 통과하고, dispatcherServlet에서 컨트롤러 사이에서, 인터셉터가 동작하고, 컨트롤러로 다양한 파라미터를 입력해주는 argumentResolver와 같이 조금 더 여러가지 단계를 거친다.

---
# 핵심 키워드

- ***SOLID***
  - 객체지향 설계에서 지켜줘야 할 5개의 소프트웨어 개발 원칙을 말한다.
  - SRP(Single Responsibility Principle): 단일 책임 원칙 
  - OCP(Open Closed Priciple): 개방 폐쇄 원칙 
  - LSP(Listov Substitution Priciple): 리스코프 치환 원칙 
  - ISP(Interface Segregation Principle): 인터페이스 분리 원칙 
  - DIP(Dependency Inversion Principle): 의존 역전 원칙
    
- ***DI***
  - 의존성 주입
  - 외부에서 두 객체 간의 관계를 결정해주는 디자인 패턴으로 인터페이스를 사이에 둬서 클래스 레벨에서는 의존관계가 고정되지 않도록 한다.
  - 런타임 시에 관계를 동적으로 주입하여 유연성을 홧보하고 결합도를 낮출 수 있게 한다.
- ***IoC***
  - 제어의 역전
  - 기존의 개발 방식에서 개발자가 직접 제어 흐름을 제어하는 것이 아니라, 외부의 프레임워크나 라이브러리가 제어 흐름을 대신하게 되는 것을 말한다.

- ***생성자 주입 vs 수정자, 필드 주입 차이***
  - 빈 객체를 생성하는 시점에 생성자의 파라미터 빈 객체를 찾아서 먼저 주입한 뒤에 주입받은 빈 객체를 이용하여 생성(생성자 주입)
  - 빈을 먼저 생성한 후에 필드에 대해서 주입하기 때문에 빈 객체를 생성하는 시점에는 순환 참조의 발생 여부 모름(수정자, 필드 주입)
  - 수정자, 필드 주입은 (생성->주입) / 생성자 주입 (주입->생성)
- ***AOP***
  - AOP는 관점 지향 프로그램으로 관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 그 관점을 기준으로 각각 모듈화
  - 
- ***서블릿***
  - 클라이언트의 요청을 처리하고, 그 결과를 반환하는 Servlet 클래스의 구현 규칙을 지킨 자바 웹 프로그래밍 기술
  - 서블릿은 html을 사용하여 요청에 응답 -> MVC가 Controller로 이용 -> 해당 서비스로 이동 -> 응답을 보냄
---

---

# 학습 후기
- 어느 정도 알고 있다고 생각했지만 서블릿 등 이 개념을 확실히 몰랐던것 같다
- 이번 기회를 통해서 spring 의존성 주입에 대한 개념을 자세히 익힐 수 있게 되었고 spring에 기본 구문에 대한 이해력이 올라갔다.

