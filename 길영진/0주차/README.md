# SQL

## SQL이란? 

- 구조적 쿼리 언어(SQL)는 관계형 데이터베이스에 정보를 저장하고 처리하기 위한 프로그래밍 언어입니다. 
- 관계형 데이터베이스는 정보를 표 형식으로 저장하며, 행과 열은 다양한 데이터 속성과 데이터 값 간의 다양한 관계를 나타냅니다. 
- SQL 문을 사용하여 데이터베이스에서 정보를 저장, 업데이트, 제거, 검색 및 검색할 수 있습니다. 데이터베이스 성능을 유지 관리하고 최적화하는 데 SQL을 사용할 수도 있습니다.

## NoSQL이란?

- Not Only SQL의 약자로 SQL을 사용하지 않는 DBMS를 의미한다
- key-value, document, graph 등 다양한 데이터 구조를 지원한다 
- 데이터가 미리 정의된 스키마를 따르지 않고 데이터 요소 간의 관계가 잘 정의되어 있지 않은 반정형 또는 비정형 데이터에 적합합니다

---

# ERD

- ERD는 프로젝트 시작과 동시에 설계하는 것이 좋다.
- ERD 내의 세세한 내용들은 프로젝트를 진행하면서 계속해서 수정될 수 있다.
- 같은 프로젝트를 진행하는 팀원 모두가 공통된 데이터베이스를 인지하고 작업을 진행해야 한다.

---

# Database 설계

## 요구 사항

### 사용자 관련 요구 사항

1. **카카오 소셜 로그인**을 구현 할 예정이다.
2. **회원 탈퇴 기능**이 필요하다.
3. **이름, 닉네임, 전화번호, 성별**이 필요하다.

### 책 관련 요구 사항

1. **사용자가 책 여러 권을 대여**할 수 있다.
2. 책은 **하나의 카테고리**가 있다.
3. 책은 **제목, 설명에 대한 정보**가 필요하다.
4. 책 소개 페이지에 **해시태그**가 붙을 수 있고,
   **책 한 권에 해시태그 여러 개**가, **해시태그 하나가 여러 책**에 붙을 수 있다.
5. 사용자가 책 설명 페이지에서 책에 **좋아요**를 누를 수 있다.
6. 책 **카테고리 별로 현재 몇 개의 책이 있는지 집계**가 필요하다.

### 알림 관련 요구 사항

1. 알림은 **공지 관련 알림, 책 반납 시간 임박 알림, 마케팅 알림이 있을 수 있다.**

## 설계해보기

 <img alt="erd0_1" src="https://github.com/mybookG/image/blob/main/erd0_1.png?raw=true" />



---

# 핵심 키워드

- 외래키: 한 테이블의 값이 다른 테이블 기본키(PK)를 참조하도록 만든 것, 테이블 간 연결과 데이터 무결성을 위해 사용.
- 기본키: 테이블에서 각 행을 유일하게 식별할 수 있게 해주는 것
- ER 다이어그램: 현실 세계에 존재하는 데이터와그들간의 관계를 이해할수 있게 만드는용도
- 복합 키: 두 개 이상의 칼럼으로 구성된 기본키를 의미한다.
복합 키를 사용하면, 한 테이블 내의 특정 칼럼 조합의 고유성을 보장할 수 있다. 이를 통해 데이터 중복 방지 무결성 유지
- 연관 관계: 한 테이블의 한 데이터가 다른 테이블 여러 데이터와 연결되는 관계.
- 정규화: 데이터 중복을 줄이고, 이상현상(삽입·삭제·갱신 문제)을 방지하기 위해 테이블을 나누는 과정.
- 반 정규화: 성능 향상을 위해 정규화된 테이블을 일부러 합치거나 중복을 허용하는 것.
- DB에서의 상속 관계 표현: 단일테이블, 클래스테이블, 구체테이블
  - 단일 테이블 전략 : 부모와 자식 속성을 한 테이블에 모두 저장
  - 클래스 테이블 전략 : 부모 테이블 + 각 자식 테이블 별도
  - 구현 클래스 전략 : 자식 클래스마다 테이블 생성,부모 칼럼도 각 테이블에 포함
- 인덱스: 검색 속도를 빠르게 하기 위해 테이블의 특정 컬럼에 만든 자료 구조예요.

---
# 미션
 <img alt="erd0" src="https://github.com/mybookG/image/blob/main/erd0.png?raw=true" />


---

# 학습 후기
- 생각보다 erd구성과 api명세서 작업이 어렵다는 것을 깨달았고 데이터베이스 설계할 떄 생각 할 점이 너무 많았다.
- many_To_many를 사용하지 않고 쪼개어하는 것과 서로의 연결관계를 생각해내는 것이 복잡했다.
- 무엇보다 변수명을 정하는 것이 매우 어려운것같다.

