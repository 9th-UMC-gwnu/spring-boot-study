# π±API & Swagger & Annotation (1)

# Swagger
- κ°λ°ν•  APIλ“¤μ λ©λ΅μ„ ν™•μΈν•κ³  ν…μ¤νΈ ν•  μ μλ” ν”„λ μ„μ›ν¬
- Swaggerλ” OpenAPI μ¤ν©μ„ λ§μ¶ api-docsλ¥Ό μ΄μ©ν•μ—¬ html νμ΄μ§€λ΅ λ¬Έμ„ν™”ν•΄μ£Όλ” ν”„λ μ„ μ›ν¬μ΄λ‹¤.
- λ°νƒ€μ„ μ‹ μ•Ίν”„λ¦¬μΌ€μ΄μ…μ„ κ²€μ‚¬ν•μ—¬ Spring κµ¬μ„±, ν΄λμ„ κµ¬μ΅° λ° λ‹¤μ–‘ν• μ–΄λ…Έν…μ΄μ…μ„ κΈ°λ°μΌλ΅ API μλ―Έλ¥Ό μ¶”λ΅ ν•λ” λ°©μ‹μΌλ΅ λ™μ‘ν•©λ‹λ‹¤.
- μ£Όμ†μ°½μ— "http://localhost:8080/swagger-ui/"λ΅ μ…λ ¥ν•μ—¬ μ ‘μ†ν•μ—¬ μ‚¬μ©
- μ—¬κΈ°μ„ basic-error-controllerλ” μ¤ν”„λ§μ—μ„ μλ™μΌλ΅ μ„¤μ •λ μ»¨νΈλ΅¤λ¬μ΄λ‹¤.
- test-controllerλ” κ°λ°μκ°€ λ§λ“  TestController

## Swagger-validation
- spring boot 2.3 version μ΄μƒλ¶€ν„°λ” μ•„μ λ¨λ“λ΅ λΉ μ Έ validation μμ΅΄μ„±μ„ λ”°λ΅ μ¶”κ°€ν•΄μ¤μ•Ό μ‚¬μ©ν•  μ μλ‹¤.
- validationμ€ μ ν¨μ„± κ²€μ‚¬ 
- μ»¨νΈλ΅¤λ¬μ—μ„ Request κ°μ²΄ μ•μ— @Valid μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κ³ , Errorsλ¥Ό ν†µν•΄ μ ν¨μ„± κ²€μ‚¬ μ ν•© μ—¬λ¶€λ¥Ό ν™•μΈν•λ‹¤.
- μ΄λ• Errorsλ” λ°λ“μ‹ Request κ°μ²΄ λ°”λ΅ λ’¤μ— μ„μΉν•΄μ•Ό ν•λ‹¤.
- **@Documented** - μ΄ μ–΄λ…Έν…μ΄μ…μ€ μ‚¬μ©μ μ •μ μ–΄λ…Έν…μ΄μ…μ„ λ§λ“¤ λ• λ¶™μΈλ‹¤.
- **@Target** - μ΄ μ–΄λ…Έν…μ΄μ…μ€ μ–΄λ…Έν…μ΄μ…μ μ μ© λ²”μ„λ¥Ό μ§€μ •ν•λ‹¤.
- **@Retention** - μ΄ μ–΄λ…Έν…μ΄μ…μ€ μ–΄λ…Έν…μ΄μ…μ μƒλ… μ£ΌκΈ°λ¥Ό μ§€μ •ν•λ‹¤.
# ν•µμ‹¬ ν‚¤μ›λ“
## JAVA Exception μΆ…λ¥
- μμ™Έ(Exception)λ€ μ‚¬μ©μμ μλ»κ΄Έ μ΅°μ‘ λλ” κ°λ°μμ μλ»λ μ½”λ”©μΌλ΅ μΈν•΄ λ°μƒν•λ” ν”„λ΅κ·Έλ¨ μ¤λ¥
- μμ™Έλ” μμ™Έμ²λ¦¬(Exception Handling)μ„ ν†µν•΄ ν”„λ΅κ·Έλ¨μ„ μΆ…λ¥ν•μ§€ μ•κ³  μ •μƒ μ‹¤ν–‰ λ  μ μλ‹¤.
- **μΌλ° μμ™Έ**λ” μ»΄νμΌ μ²΄ν¬ μμ™ΈλΌκ³ λ„ ν•λ”λ°, μλ°” μ†μ¤λ¥Ό μ»΄νμΌν•λ” κ³Όμ •μ—μ„ μμ™Έ μ²λ¦¬ μ½”λ“κ°€ ν•„μ”ν•μ§€ κ²€μ‚¬ν•κΈ° λ•λ¬Έμ΄λ‹¤.
- **μ‹¤ν–‰ μμ™Έ**λ” μ»΄νμΌν•λ” κ³Όμ •μ—μ„ μμ™Έ μ½”λ“λ¥Ό κ²€μ‚¬ν•μ§€ μ•λ” μμ™Έλ¥Ό λ§ν•λ‹¤.
1. **NullPointerException(NPE)**
    - κ°μ²΄ μ°Έμ΅°κ°€ μ—†λ” μƒνƒ, μ¦‰ null κ°’μ„ κ°€μ§€κ³  μλ” μ°Έμ΅° λ³€μλ΅ κ°μ²΄ μ ‘κ·Ό μ—°μ‚°μμΈ μ (.)μ„ μ‚¬μ©ν•μ€μ„ κ²½μ°
    - μ•„λ¬΄κ²ƒλ„ μ—†λ” μƒνƒμ— μ ‘κ·Όν•λ ¤ ν–μ„ κ²½μ° λ°μƒ
2. **ArrayIndexOutOfBoundsException**
    - λ°°μ—΄μ—μ„ ν• λ‹Ήλ λ°°μ—΄μ μΈλ±μ¤ λ²”μ„λ¥Ό μ΄κ³Όν•μ—¬ μ‚¬μ©ν•  κ²½μ° λ°μƒν•λ” μ—λ¬
    - int[] arr = new int[3]μ΄λΌκ³  μ„ μ–Έν–λ”λ° arr[3]μ— μ ‘κ·Όν•μ€λ‹¤λ©΄ λ°μƒ
3. **NumberFormatException**
    - μ«μ λ³€ν™ μμ™Έλ΅ λ¬Έμμ—΄μ„ μ«μλ΅ λ³€ν™ν•μ€μ„ κ²½μ° μ«μλ΅ λ³€ν™ν•  μ μ—†λ” κ°’μ΄ λ“¤μ–΄μ¤λ” κ²½μ°
    - ex> String wrongData = "A100"; // int value2 = Integer.parseInt(wrongData); μμ™Έ λ°μƒ
4. **ClassCastException**
    - νƒ€μ… λ³€ν™(Casting)μ€ μƒμ„ ν΄λμ¤μ™€ ν•μ„ ν΄λμ¤κ°„μ— λ°μƒν•κ³  κµ¬ν„ ν΄λμ¤μ™€ μΈν„°νμ΄μ¤ κ°„μ—λ„ λ°μƒν•λ‹¤.
    - μ΄λ¬ν• κ΄€κ³„κ°€ μ•„λ‹λΌλ©΄ ν΄λμ¤λ” λ‹¤λ¥Έ ν΄λμ¤λ¥Ό νƒ€μ…μΌλ΅ λ³€ν™ν•  μ μ—†λ‹¤.
    - μ–µμ§€λ΅ νƒ€μ…λ³€ν™μ„ μ‹λ„ν•  κ²½μ°  ClassCastExceptionμ΄ λ°μƒν•λ‹¤.
## Valid
- Springμ—μ„λ” κΈ°λ³Έ κµ¬ν„μ²΄λ΅ Hibernate Validatorλ¥Ό μ‚¬μ©ν•λ‹¤.
- μ¦‰, @Validλ” β€μ΄ κ°μ²΄μ ν•„λ“λ“¤μ— μ„¤μ •λ μ μ•½ μ΅°κ±΄μ„ κ²€μ‚¬ν•λΌβ€λ” μλ―Έμ΄λ‹¤.
- κ²€μ¦ν•  λ€μƒμ μ•μ— @RequestBodyμ™€ @Validλ¥Ό κ°™μ΄ λ¶™μ—¬μ„ μ ν¨μ„± κ²€μ¦ ν•κ² λ‹¤κ³  hibernateμ—κ² μ•λ¦Ό
```java
@PostMapping("/user")
public ResponseEntity<String> createUser(@Valid @RequestBody UserDto user) {
    return ResponseEntity.ok("λ“±λ΅ μ™„λ£");
}
```
- **μ ν¨μ„± κ²€μ‚¬**
   1. ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ„ λ³΄λƒ„
   2. Springμ΄ @Validκ°€ λ¶™μ€ κ°μ²΄λ¥Ό μΈμ‹
   3. Bean Validation κ·μΉ™(@NotNull, @Email, @Size λ“±)μ„ κ²€μ‚¬
   4. μ‹¤ν¨ μ‹ μμ™Έ λ°μƒ
   5. μ„±κ³µ μ‹ Controller λ©”μ„λ“ λ‚΄λ¶€λ΅ μ§„μ… 

- ### μ μ•½μ΅°κ±΄ μ„¤μ •
<div style="border-left: 10px solid #FFFF; padding: 5px; background-color: #0000;">
<b>@NotNull</b> : ν•΄λ‹Ή ν•„λ“μ— nullκ°’μ„ λ¶ν—ν•λ‹¤.

<b>@NotEmpty</b> : ν•΄λ‹Ή ν•„λ“μ— null, ""μ„ λ¶ν—ν•λ‹¤.

<b>@NotBlank</b> : ν•΄λ‹Ή ν•„λ“μ— null, "", " " μ„ λ¶ν—ν•λ‹¤. μ¦‰ μµμ† 1κΈ€μ

<b>@Min</b> : ν•΄λ‹Ή ν•„λ“μ μµμ†κ°’μ„ λ²—μ–΄λ‚λ”μ§€ κ²€μ¦ν•λ‹¤.

<b>@Max</b> : ν•΄λ‹Ή ν•„λ“μ μµλ€κ°’μ„ λ²—μ–΄λ‚λ”μ§€ κ²€μ¦ν•λ‹¤.

<b>@Pattern</b> : ν•΄λ‹Ή ν•„λ“κ°€ νΉμ • ν•νƒλ¥Ό κ°€μ§€λ„λ΅ κ²€μ¦ν•λ‹¤. (μ •κ·ν‘ν„μ‹μΌλ΅ ν‘ν„ν•¨)

<b>@Email</b> : ν•΄λ‹Ή ν•„λ“κ°€ μ΄λ©”μΌ ν•μ‹μ„ κ°€μ§€λ„λ΅ κ²€μ¦ν•λ‹¤.

<b>@Size</b> : λ¬Έμμ—΄μ μµμ†, μµλ€ ν¬κΈ°λ¥Ό κ²€μ¦ν•λ‹¤.<br>
@Size(min=10, max=100) κ³Ό κ°™μ΄ μ‚¬μ©ν•  μ μμΌλ©°, κΈ°λ³Έκ°’μ€ min=0, max=μ •μν•μ μµλ€κ°’ μ΄λ‹¤.
</div>

# ν•™μµ ν›„κΈ°
- Swaggerλ¥Ό ν†µν• API λ¬Έμ„ν™” λ° ν…μ¤νΈμ νΈλ¦¬μ„±μ„ μ΄ν•΄ν•κ³ , μ ν¨μ„± κ²€μ‚¬μ μ¤‘μ”μ„±κ³Ό λ™μ‘ μ›λ¦¬λ¥Ό μ™μ§€ν–μµλ‹λ‹¤.
- Java μμ™Έμ λ‘ κ°€μ§€ μ£Όμ” μΆ…λ¥μ™€ μ£Όμ” μ‹¤ν–‰ μμ™Έμ λ°μƒ μƒν™© λ° κ°λ…μ„ λ…ν™•ν νμ•…ν–μµλ‹λ‹¤.
# λ―Έμ…
### 1μ£Όμ°¨ μ‚¬μ§„
 <img alt="erd0" src="https://github.com/mybookG/image/blob/main/erd0.png?raw=true" />

### github λ§ν¬
https://github.com/mybookG/Umc_personal_repository