# SQL

## SQL이란? 

- SQL은 Structured Query Language의 약자로 관계형 데이터베이스를 사용하는 시스템에서 데이터를 관리하는 데 사용되는 언어입니다. 
- 입출력 속도 보다는 정확도와 입출력이 중요할 때 적합하며 데이터가 일관되고 테이블 간의 관계가 잘 정의된 구조화된 데이터에 좋습니다. 

## NoSQL이란?

- Not Only SQL의 약자로 SQL을 사용하지 않는 DBMS를 의미한다.
- key-value, document, graph 등 다양한 데이터 구조를 지원한다. 
- 데이터가 미리 정의된 스키마를 따르지 않고 데이터 요소 간의 관계가 잘 정의되어 있지 않은 반정형 또는 비정형 데이터에 적합합니다. 

---

# ERD

- ERD는 프로젝트 시작과 동시에 설계하는 것이 좋다.
- ERD 내의 세세한 내용들은 프로젝트를 진행하면서 계속해서 수정될 수 있다.
- 같은 프로젝트를 진행하는 팀원 모두가 공통된 데이터베이스를 인지하고 작업을 진행해야 한다.

---

# Database 설계

## 요구 사항

### 사용자 관련 요구 사항

1. **카카오 소셜 로그인**을 구현 할 예정이다.
2. **회원 탈퇴 기능**이 필요하다.
3. **이름, 닉네임, 전화번호, 성별**이 필요하다.

### 책 관련 요구 사항

1. **사용자가 책 여러 권을 대여**할 수 있다.
2. 책은 **하나의 카테고리**가 있다.
3. 책은 **제목, 설명에 대한 정보**가 필요하다.
4. 책 소개 페이지에 **해시태그**가 붙을 수 있고,
   **책 한 권에 해시태그 여러 개**가, **해시태그 하나가 여러 책**에 붙을 수 있다.
5. 사용자가 책 설명 페이지에서 책에 **좋아요**를 누를 수 있다.
6. 책 **카테고리 별로 현재 몇 개의 책이 있는지 집계**가 필요하다.

### 알림 관련 요구 사항

1. 알림은 **공지 관련 알림, 책 반납 시간 임박 알림, 마케팅 알림이 있을 수 있다.**

## 설계해보기


<img width="1310" height="932" alt="ch0" src="https://github.com/user-attachments/assets/e0d3a5b0-0d6c-4adf-aeeb-28e2676156f7" />

---
# 실습
<img width="1180" height="642" alt="umc_ch0실습" src="https://github.com/user-attachments/assets/b74e1dd0-0d14-4003-a59e-e9fe34491a49" />

---
# 핵심 키워드

- 외래키: 다른 테이블의 기본 키를 참조하는 속성, 테이블 간 관계를 연결한다.
- 기본키: 테이블에서 각 행을 유일하게 식별할 수 있는 속성
- ER 다이어그램: 데이터베이스의 설계를 시각적으로 표현한 다이어그램
- 복합 키: 두 개 이상의 속성을 묶어 기본 키로 사용하는 것
- 연관 관계: 테이블 간의 논리적 연결
- 정규화: 데이터의 중복을 줄이고, 무결성을 보장하기 위해 테이블을 분리하는 과정
  - 제 1 정규화 : 컬럼의 원자값 유지
  - 제 2 정규화 : 부분 종속 제거(복합키에서 일부 속성이 복합키 중 일부에만 종속)
  - 제 3 정규화 : 이행적 종속 제거(PK가 아닌 컬럼 간 의존성 제거)
- 반 정규화: 성능 최적화를 위해 일부러 중복을 허용하는 것
- DB에서의 상속 관계 표현: 객체 지향의 상속 구조를 DB에 매핑하는 방법
  - 단일 테이블 전략 : 부모 + 자식 속성을 하나의 테이블에 모두 저장
  - 조인 전략 : 부모 테이블 + 자식 테이블 따로 생성,PK로 조인
  - 구현 클래스 전략 : 자식 클래스마다 테이블 생성,부모 속성 포함
- 인덱스: 데이터를 빠르게 조회하기 위한 DB 구조

---

# 학습 후기
- 요구 사항대로 ERD를 작성하는게 생각보다 힘들었고, PM과 소통을 잘해야 더 잘 만들 수 있겠다고 느꼈습니다. 
- Delete로 바로 삭제하는 Hard Delete보다 batch를 통해 soft delete를 하는게 더  좋다는것을 알게 되었고, 이를 위해 테이블에 상태컬럼을 추가 해야한다고 생각했습니다.
